#### Глава 14. Создание анимации 

в false, то анимация будет циклической. Если же этот параметр принимает значение true, то анимация отобразится только один раз, а после остановки будет показан последний кадр. 

Код запуска анимации несложен: 

```
// Находим область ImageView 
ImageView image = (ImageView)findViewByid(R.id.image); 
// загружаем анимацию из файла frames.xml 
image.setВackgroundResource(R.anim.frames); 
AnimationDrawaЫe rnyAnim = (AnimationDrawaЫe)image.getBackground();
```
Запустить и остановить анимацию можно методами start () и stop () :
```
myAnim.start () ; 
myAnim.stop () ;
```
В листинге 14.5 приведен более полный код запуска анимации.

_Листинг 14.5. Запуск кадровой анимации_
```
// Подключаем необходимый пакет 
import android.graphics.drawaЫe.AnimationDrawaЫe; 
...
// Находим область ImageView 
ImageView image = (ImageView)findViewByid(R.id.image); 
// загружаем анимацию из файла frames.xml 
image.setBackgroundResource(R.anim.frames); 
AnimationDrawaЫe myAnim = (AnimationDrawaЫe)image.getBackground(); 
// запускаем анимацию 
myAnim.start () ;
```

В случае с кадровой анимацией можно обойтись и без ХМL-файла. Сначала нужно заполучить кадры, которые мы будем использовать для анимации ( файлы frame1.png - frame5.png):
```
BitmapDrawaЬie framel = (BitmapDrawaЫe)getResources().getDrawaЬle(R.drawaЫe.framel); 
...
BitmapDrawabie frame5 = (BitmapDrawaЫe)getResources().getDrawaЬle(R.drawaЫe.frame5);
```
Затем создать объект класса AnirnationDrawaЫe. Атрибут oneshot устанавливается методом setOneShot() этого класса, а добавить кадры можно методом addFrarne(): 
```
AnimationDrawaЬle myAnim = new AnimationDrawaЬle(); 
myAnim.setOneShot(false); 
myAnim.addFrame(framel, 100); 
...
myAnim.addFrame(frame5, 100); 
```
Далее порядок действий тот же: нужно установить анимацию в качестве фона для объекта класса ImageView (объект image), сделать объект AnimationDrawaЫe видимым и запустить анимацию: 
```
image.setBackgroundDrawaЫe(MyAnim); 
MyAnim.setVisiЫe(true, true); 
MyAnim.start(); 
```
Какой из способов выбрать - решать вам. ХМL-файлы удобно использовать для постоянной анимации (кадры которой не изменяются), а вот формирование кадров через метод addFrame() полезно, когда производится загрузка файлов из внешнего источника, например из SD-карты устройства.

# Часть IV

## Дополнительные материалы


__Глава 15.__ Арр lnventor- среда быстрой разработки приложений

__Глава 16.__ Отладка приложений

__Глава 17.__ Распространение ваших программ через Google Play

__Глава 18.__ Эмулятор Genymotion

# Глава 15 

# Арр lnventor - среда быстрой разработки приложений 

## 15.1. Введение в Арр lnventor

Арр Inventor - это среда визуальной разработки Аndrоid-приложений, не требующая, как утверждается, навыков программирования. Первоначально она была разработана для Google Labs, а затем передана Массачусетскому технологическому институту (другими словами, сейчас сама компания Google не имеет никакого отношения к этой среде).

Разработка приложений в Арр Inventor осуществляется с помощью визуального языка программирования, похожего на язык Scratch, но если вы не имеете отношения к программированию, то это мало вам что скажет.

Итак, давайте разберемся, что же представляет собой Арр Inventor. Разработчики Android уверяют, что с помощью Арр Inventor даже домохозяйка сможет разработать свое приложение без минимальных навыков программирования. Вам в это верится? Мне - нет. Однако, используя Арр Inventor, у вас все-таки получится создать приложение без знаний языка Java и, вообще, без знания какого-либо языка программирования. Приложения в Арр Inventor создаются по принципу конструктора: расставил кнопки и другие элементы управления в окне "смартфона", собрал выполняемые программой действия и, вуаля - программа готова. Ошибиться в действиях как бы тоже невозможно, поскольку все компоненты приложения собираются по принципу пазла.

В Интернете есть видео, где девушка, якобы не имеющая никакого отношения к программированию, создает за пару минут приложение. Приложение простое: нажимаешь на изображение кота - слышишь звук его мява:

[http://www.youtube.com/watch?v=8ADwPLSFeY8](http://www.youtube.com/watch?v=8ADwPLSFeY8).

Полагаю, общее впечатление о том, что такое Арр Inventor, у вас сформировалось. Теперь - мое отношение к этой среде. Если хочешь что-то выучить, то нужно 
учиться, разбираться, рробовать. Ничего просто так не дается. Да, Арр Inventor - хорошая попытка создать RАD-систему (систему быстрой разработки) для Android, 
но, на мой взгляд, попытка удалась не вполне.

В Арр Inventor мне не понравилось две особенности. Первая - весьма скудный функционал самой среды. Сложное Аndrоid-приложение с помощью Арр Inventor вы вряд ли сможете построить (именно построить, а не разработать). Когда вы пишете приложение на Java, то ваши возможности ограничены, по сути, только вашими навыками в программировании. Если же в Арр Inventor не окажется нужного «пазла», то приложение создать не получится. Вторая - с помощью Арр lnventor простенькое приложение вы создадите, но размер АРК-файла будет неприлично большим, я бы даже сказал - огромным.

Надо, впрочем, отметить, что большая часть моих претензий к среде Арр lnventor относится к ее первой версии. Вторая версия среды (Арр lnventor Version 2) по сравнению с первой стала значительно лучше. Во-первых, больше нет мучительной процедуры установки. Среда якобы бьша рассчитана на домохозяек, но для ее запуска на компьютере домохозяйки требовался опытный системный администратор. Сейчас надо лишь зайти на сайт среды и нажать кнопку __Create__ - далее все будет работать, как и должно, без каких-либо танцев с бубном. Во-вторых, улучшена функциональность самой среды, появились дополнительные пазлы, создавать приложения стало удобнее. Но все равно вы остаетесь ограничены имеющейся функциональностью. Приведу небольшой пример. В Android нет диалогового окна выбора файла, который есть в API Windows. Вы не замечали, что у всех приложений Windows диалоговые окна открытия и сохранения файлов одинаковые? Это потому, что они реализованы на уровне API операционной системы. В Android такой реализации нет. Однако, используя Java и стандартные виджеты Android, вы можете реализовать необходимые диалоговые окна. А вот в Арр lnventor подобная реализация отсутствует. Следовательно, создать Android программу с диалоговым окном открытия файла с помощью Арр Inventor у вас не получится.

## 15.2. Начало работы с Арр lnventor  

Для работы с Арр Inventor нужно установить виртуальную машину Java. Последнюю ее версию можно получить по адресу: [http://www.java.com/ru/download/](http://www.java.com/ru/download/).

Загрузив и установив виртуальную машину Java, перейдите на сайт МIТ Арр lnventor (рис. 15.1) по адресу: [http://appinventor.mit.edu/explore/](http://appinventor.mit.edu/explore/).

На этом сайте находится много вспомогательных материалов, которые помогут разобраться со средой. Обязательно изучите их на досуге. А сейчас нажмите кнопку __Create apps!__ в верхнем правом углу - вы увидите запрос на досrуп к вашему Google-aккayнry. Разрешите приложению МIТ Applnventor Version 2 такой досrуп.

Далее среда предложит вам просмотреть краткий обзор (рис. 15.2). Вы можете нажать кнопку Take Survey Now, чтобы просмотреть обзор прямо сейчас, кнопку __Take Survey Later__, чтобы просмотреть обзор позже, и, наконец, кнопку __Never Take Survey__, чтобы вовсе отказаться от просмотра. Пока же, чтобы, не отвлекаться от чтения книги, нажмите кнопку __Take Survey Later__ - среда подскажет, как подключить и настроить Апdrоid-устройство или эмулятор (рис. 15.3). 

Ознакомьтесь с приведенными ссьшками ( откройте их в новом окне или новой вкладке) и нажмите кнопку __Continue__ - вы увидите список созданных вами проектов. Понятное дело, список поначалу будет пуст, поскольку вы еще не успели ничего создать, а вот у меня уже кое-что создано (рис. 15.4).

Нажмите кнопку __New Project__ для создания нового проекта. Введите название проекта и нажмите кнопку __ОК__ (рис. 15.5). Имя проекта не должно содержать пробелов и символов национальных алфавитов, должно начинаться с буквы, может содержать цифры и знак подчеркивания. 

![сайт](Docs/1.png)
### Рис. 15.1. Сайт appinventor.mlt.edu
![обзор](Docs/2.png)
### Рис. 15.2. Просмотреть обзор?
